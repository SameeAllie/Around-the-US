!function(){"use strict";var e=class{constructor(e,t){this._form=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputList=[],this._buttonElement}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){this._errorELement=this._form.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorELement.classList.remove(this._errorClass),this._errorELement.textContent=""}_toggleInputError(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}disableSubmitButton(){this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)}_enableSubmitButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputError(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class t{constructor(e,t,o){this._text=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=o}_setEventListeners(){this._element.querySelector(".card__like-button").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector(".card__delete-button").addEventListener("click",(()=>this._handleDeleteButton())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleCardClick({name:this._text,link:this._link})))}_handleLikeButton(){this._element.querySelector(".card__like-button").classList.toggle("card__active-button")}_handleDeleteButton(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return e.src=this._link,e.alt=this._text,t.textContent=this._text,this._element}}class o{constructor(e){let{popupSelector:t}=e;var o,n,r;o=this,r=e=>{"Escape"===e.key&&this.closeModalWindow()},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="_handleEscClose"))in o?Object.defineProperty(o,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[n]=r,this._popupElement=document.querySelector(t)}openModalWindow(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}closeModalWindow(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}setEventListeners(){this._popupElement.querySelector(".popup__close-button").addEventListener("click",(()=>this.closeModalWindow())),this._popupElement.addEventListener("click",(e=>{e.target.matches(".popup")&&this.closeModalWindow()}))}}class n extends o{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._submitCallback=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".popup__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._submitCallback(this._getInputValues()),this.closeModalWindow()})),super.setEventListeners()}closeModalWindow(){this._popupForm.reset(),super.closeModalWindow()}}document.querySelector(".photo-grid__cards"),document.querySelector(".popup"),document.querySelector(".create-popup");const r=document.querySelector("#profile-popup"),s=document.querySelector("#create-popup"),i=(document.querySelector("#popup__close-button"),document.querySelector(".profile__edit-button")),l=document.querySelector(".profile__add-button"),u=(document.querySelector("#popup__close-edit"),document.querySelector("#popup__close-create"),document.querySelector(".profile__name"),document.querySelector(".profile__title"),document.querySelector("#popup__close-button"),document.querySelector("#preview-popup"),document.querySelector("#title")),a=document.querySelector("#description"),c=(document.querySelector("#name"),document.querySelector("#link"),{inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),p=new e(c,r),d=new e(c,s);p.enableValidation(),d.enableValidation();const _=new class extends o{openModalWindow(e){let{link:t,name:o}=e;const n=this._popupElement.querySelector(".popup__preview-image"),r=this._popupElement.querySelector(".popup__preview-name");n.src=t,r.alt=o,r.textContent=o,super.openModalWindow()}}({popupSelector:"#preview-popup"});_.setEventListeners();const m=e=>new t(e,"#card-template",(e=>{_.openModalWindow(e)})).getView(),h=new class{constructor(e,t){let{items:o,renderer:n}=e;this._items=o,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:m},".photo-grid__cards");h.renderItems();const S=new n("#profile-popup",(e=>{E.setUserInfo(e.title,e.description)})),b=new n("#create-popup",(e=>{const t=m({name:e.name,link:e.link});h.addItem(t)})),E=new class{constructor(e){let{nameSelector:t,jobSelector:o}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(o)}getUserInfo(){return{name:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}}({nameSelector:".profile__name",jobSelector:".profile__title"});b.setEventListeners(),S.setEventListeners(),l.addEventListener("click",(()=>{b.openModalWindow(),d.disableSubmitButton()})),i.addEventListener("click",(()=>{S.openModalWindow();const e=E.getUserInfo();u.value=e.name,a.value=e.description}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQW1CdUMsSUFDM0RDLEVBQVlDLFlBQVlGLEVBQVlHLE1BQU9ILEVBQVlJLFlBQVksSUFJL0RDLEVBQWUsSUFBSTVDLEVBQWMsaUJBQWtCdUMsSUFDdkQsTUFBTU0sRUFBT3JCLEVBQVcsQ0FBRXRELEtBQU1xRSxFQUFZckUsS0FBTUUsS0FBTW1FLEVBQVluRSxPQUNwRXNELEVBQWVVLFFBQVFTLEVBQUssSUFHeEJMLEVBQWMsSUdyREwsTUFDYnhILFlBQVdxRSxHQUFnQyxJQUEvQixhQUFFeUQsRUFBWSxZQUFFQyxHQUFhMUQsRUFDdkNsRSxLQUFLNkgsYUFBZXBFLFNBQVN4QyxjQUFjMEcsR0FDM0MzSCxLQUFLOEgsWUFBY3JFLFNBQVN4QyxjQUFjMkcsRUFDNUMsQ0FFQUcsY0FLRSxNQUppQixDQUNmaEYsS0FBTS9DLEtBQUs2SCxhQUFheEcsWUFDeEJtRyxZQUFheEgsS0FBSzhILFlBQVl6RyxZQUdsQyxDQUdBaUcsWUFBWXZFLEVBQU1pRixHQUNoQmhJLEtBQUs2SCxhQUFheEcsWUFBYzBCLEVBQ2hDL0MsS0FBSzhILFlBQVl6RyxZQUFjMkcsQ0FDakMsR0htQytCLENBQy9CTCxhQUFjLGlCQUNkQyxZQUFhLG9CQUdmSCxFQUFhL0Msb0JBQ2J5QyxFQUFnQnpDLG9CQUVoQmlCLEVBQVVyRCxpQkFBaUIsU0FBUyxLQUNsQ21GLEVBQWFsRCxrQkFDYjBCLEVBQWlCbEUscUJBQXFCLElBR3hDMkQsRUFBV3BELGlCQUFpQixTQUFTLEtBQ25DNkUsRUFBZ0I1QyxrQkFFaEIsTUFBTTBELEVBQVdaLEVBQVlVLGNBQzdCbkMsRUFBZ0JOLE1BQVEyQyxFQUFTbEYsS0FDakM4QyxFQUFzQlAsTUFBUTJDLEVBQVNULFdBQVcsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdJdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25Db25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSB2YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gdmFsaWRhdGlvbkNvbmZpZy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtdO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JFTGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVMZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvckVMZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgX3RvZ2dsZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLypcbkZvciBlYWNoIGlucHV0IGVsZW1lbnQsIHRoZSBmdW5jdGlvbiBjaGVja3MgdGhlIHZhbGlkaXR5IHByb3BlcnR5IG9mIHRoZSBlbGVtZW50LCB3aGljaCBpcyBhIGJvb2xlYW4gdmFsdWUgaW5kaWNhdGluZyBcbndoZXRoZXIgdGhlIGlucHV0IGlzIHZhbGlkIGFjY29yZGluZyB0byB0aGUgY29uc3RyYWludHMgc3BlY2lmaWVkIGluIHRoZSBlbGVtZW50J3MgYXR0cmlidXRlcyAoc3VjaCBhcyByZXF1aXJlZCwgbWluLCBtYXgsIGV0Yy4pLlxuXG5JZiBhbiBpbnB1dCBlbGVtZW50IGlzIGZvdW5kIHRvIGJlIGludmFsaWQsIHRoZSBzb21lIG1ldGhvZCBpbW1lZGlhdGVseSByZXR1cm5zIHRydWUsIGluZGljYXRpbmcgdGhhdCB0aGVyZSBcbmlzIGF0IGxlYXN0IG9uZSBpbnZhbGlkIGlucHV0IGVsZW1lbnQgaW4gdGhlIGFycmF5LiBPdGhlcndpc2UsIGlmIGFsbCBpbnB1dCBlbGVtZW50cyBhcmUgdmFsaWQsIHRoZSBzb21lIG1ldGhvZCByZXR1cm5zIGZhbHNlLlxuXG5TbyB0aGUgZnVuY3Rpb24gaGFzSW52YWxpZElucHV0IHJldHVybnMgdHJ1ZSBpZiB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgaW52YWxpZCBpbnB1dCBlbGVtZW50IGluIHRoZSBpbnB1dCBhcnJheSwgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiovXG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICAvLyBjaGFuZ2UgdGhlc2UgdHdvIGZ1bmN0aW9ucyBfZGlzYWJsZSAuLi4gYW5kIF9lbmFibGUuLi5cblxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIF9lbmFibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsIi8vIGltcG9ydCB7IHRvZ2dsZU1vZGFsVmlzaWJpbGl0eSB9IGZyb20gXCIuLi9wYWdlL2luZGV4LmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljayl7XG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpKTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fdGV4dCwgbGluazogdGhpcy5fbGluayB9KVxuICAgICAgKTtcbiAgICAgIH07XG5cbiAgICAgIF9oYW5kbGVMaWtlQnV0dG9uKCl7XG4gICAgICAgICAgdGhpcy5fZWxlbWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19hY3RpdmUtYnV0dG9uXCIpO1xuICAgICAgICBcbiAgICAgIH07XG5cbiAgICAgIF9oYW5kbGVEZWxldGVCdXR0b24oKXtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgICAgICAgfTtcbiAgICAgIFxuXG4gICAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBnZXRWaWV3KCl7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgICAgIGNvbnN0IGNhcmRUZXh0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgICAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICAgICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RleHQ7XG4gICAgICAgIGNhcmRUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gICAgICB9O1xuICAgIH1cbiAgXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW5Nb2RhbFdpbmRvdygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2VNb2RhbFdpbmRvdygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlTW9kYWxXaW5kb3coKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcG9wdXBCdXR0b25TZXQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwX19jbG9zZS1idXR0b25cIlxuICAgICk7XG4gICAgcG9wdXBCdXR0b25TZXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2VNb2RhbFdpbmRvdygpKTtcblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQubWF0Y2hlcyhcIi5wb3B1cFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlTW9kYWxXaW5kb3coKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xuICAgIC8vIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudDtcbiAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICBjb25zdCBpbnB1dE9iamVjdCA9IHt9O1xuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRPYmplY3RbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRPYmplY3Q7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2VNb2RhbFdpbmRvdygpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZU1vZGFsV2luZG93KCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlTW9kYWxXaW5kb3coKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG4vLyBXcmFwcGVyc1xuXG5leHBvcnQgY29uc3QgcGhvdG9HcmlkV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG8tZ3JpZF9fY2FyZHNcIik7XG5leHBvcnQgY29uc3QgZWRpdFBvcHVwV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBjcmVhdGVQb3B1cFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3JlYXRlLXBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IGVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXBvcHVwXCIpO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NyZWF0ZS1wb3B1cFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQnV0dG9uUmVzZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19jbG9zZS1idXR0b25cIik7XG4vLyBCdXR0b25zIGFuZCBvdGhlciBET00gZWxlbWVudHNcblxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBlZGl0Q2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19jbG9zZS1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fY2xvc2UtY3JlYXRlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuXG5leHBvcnQgY29uc3QgYWRkQ2FyZFBvcHVwUmVzZXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19jbG9zZS1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctcG9wdXBcIik7XG5cbi8vIEZvcm0gRGF0YVxuXG5leHBvcnQgY29uc3QgdGl0bGVJbnB1dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjdGl0bGVcIlxuKTtcbmV4cG9ydCBjb25zdCBkZXNjcmlwdGlvbklucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNkZXNjcmlwdGlvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgbmFtZUlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNuYW1lXCJcbik7XG5leHBvcnQgY29uc3QgbGlua0lucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNsaW5rXCJcbik7XG5leHBvcnQgY29uc3QgdmFsaWRhdGVDb25maWcgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbi8vZXhwb3J0IHsgdmFsaWRhdGVDb25maWcgfTtcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV0l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZS9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgZWRpdEJ1dHRvbixcbiAgYWRkQnV0dG9uLFxuICBlZGl0Rm9ybSxcbiAgdmFsaWRhdGVDb25maWcsXG4gIHRpdGxlSW5wdXRGaWVsZCxcbiAgZGVzY3JpcHRpb25JbnB1dEZpZWxkLFxuICBjcmVhdGVGb3JtLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcblxuLy9jcmVhdGVzIHR3byBpbnN0YW5jZXMgb2YgdGhlIEZvcm1WYWxpZGF0b3IgY2xhc3MgYW5kIGVuYWJsZXMgdmFsaWRhdGlvbiBvbiB0d28gSFRNTCBmb3JtIGVsZW1lbnRzLFxuLy9hZGRGb3JtRWxlbWVudCBhbmQgZWRpdEZvcm1FbGVtZW50LCByZXNwZWN0aXZlbHkuXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGVDb25maWcsIGVkaXRGb3JtKTtcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZUNvbmZpZywgY3JlYXRlRm9ybSk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBuZXdQb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKHsgcG9wdXBTZWxlY3RvcjogXCIjcHJldmlldy1wb3B1cFwiIH0pO1xubmV3UG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmREYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCAoZGF0YSkgPT4ge1xuICAgIG5ld1BvcHVwSW1hZ2Uub3Blbk1vZGFsV2luZG93KGRhdGEpO1xuICB9KTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufTtcblxuY29uc3QgbmV3Q2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgeyBpdGVtczogaW5pdGlhbENhcmRzLCByZW5kZXJlcjogY3JlYXRlQ2FyZCB9LFxuICBcIi5waG90by1ncmlkX19jYXJkc1wiXG4pO1xubmV3Q2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuY29uc3QgbmV3UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjcHJvZmlsZS1wb3B1cFwiLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgbmV3VXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMudGl0bGUsIGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uKTtcbiAgLy8gZWRpdEZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufSk7XG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2NyZWF0ZS1wb3B1cFwiLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoeyBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLCBsaW5rOiBpbnB1dFZhbHVlcy5saW5rIH0pO1xuICBuZXdDYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xufSk7XG5cbmNvbnN0IG5ld1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxufSk7XG5cbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xubmV3UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBuZXdDYXJkUG9wdXAub3Blbk1vZGFsV2luZG93KCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xufSk7XG5cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbmV3UHJvZmlsZVBvcHVwLm9wZW5Nb2RhbFdpbmRvdygpO1xuXG4gIGNvbnN0IHVzZXJEYXRhID0gbmV3VXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgdGl0bGVJbnB1dEZpZWxkLnZhbHVlID0gdXNlckRhdGEubmFtZTtcbiAgZGVzY3JpcHRpb25JbnB1dEZpZWxkLnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb247XG4gIC8vIGVkaXRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcbn0pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBvcGVuTW9kYWxXaW5kb3coeyBsaW5rLCBuYW1lIH0pIHtcbiAgICBjb25zdCBpbWFnZU9wZW4gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1pbWFnZVwiKTtcbiAgICBjb25zdCBpbWFnZVRleHQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fcHJldmlldy1uYW1lXCIpO1xuICAgIGltYWdlT3Blbi5zcmMgPSBsaW5rO1xuICAgIGltYWdlVGV4dC5hbHQgPSBuYW1lO1xuICAgIGltYWdlVGV4dC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3Blbk1vZGFsV2luZG93KCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgIHRoaXMuYWRkSXRlbShlbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG4gIFxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGpvYikge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm0iLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfaW5wdXRMaXN0IiwiX2J1dHRvbkVsZW1lbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2Vycm9yRUxlbWVudCIsInJlbW92ZSIsIl90b2dnbGVJbnB1dEVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX3RleHQiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsInRvZ2dsZSIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJjYXJkSW1hZ2UiLCJjYXJkVGV4dCIsInNyYyIsImFsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJjbG9zZU1vZGFsV2luZG93IiwiX3BvcHVwRWxlbWVudCIsIm9wZW5Nb2RhbFdpbmRvdyIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsIm1hdGNoZXMiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Q2FsbGJhY2siLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfc3VibWl0Q2FsbGJhY2siLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHMiLCJpbnB1dE9iamVjdCIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImVkaXRGb3JtIiwiY3JlYXRlRm9ybSIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJ0aXRsZUlucHV0RmllbGQiLCJkZXNjcmlwdGlvbklucHV0RmllbGQiLCJ2YWxpZGF0ZUNvbmZpZyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJuZXdQb3B1cEltYWdlIiwiaW1hZ2VPcGVuIiwiaW1hZ2VUZXh0IiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwibmV3Q2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwibmV3UHJvZmlsZVBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJuZXdVc2VySW5mbyIsInNldFVzZXJJbmZvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIm5ld0NhcmRQb3B1cCIsImNhcmQiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJqb2IiLCJ1c2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=